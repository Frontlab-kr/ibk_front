import{u as t,w as l,c as i,y as e,q as s,a,x as n,U as o,s as r,_ as u}from"./Dw9mMgGh.js";import{_ as c}from"./BmYMoH4O.js";import{u as d}from"./6ZGac68T.js";import{s as m}from"./-F6av9BF.js";import{s as b}from"./mWpl4iCn.js";import{s as p}from"./BRRKvJaM.js";import{s as v}from"./BANYeSNQ.js";import{u as k}from"./caeN7-r0.js";import{d as w,r as _,D as f,A as g,E as h,o as y,c as j,e as F,a as L,s as q,b as T,h as A,t as C,F as x,f as N,i as D}from"./BL-uwq_y.js";import"./GA5mqui0.js";import"./BksjwmTJ.js";import"./DYybhxZt.js";import"./DmnJB9Er.js";import"./C-XzN7CB.js";import"./MXjtEwyk.js";import"./CpYj7tfd.js";import"./CLFGieRn.js";const Q={class:"ibk-background"},V={class:"ibk-mobile-back"},M={class:"ibk-write"},O={class:"ibk-inner"},Y={class:"ibk-write-content"},$={class:"ibk-write-list"},B={class:"ibk-write-list-item"},P=F("div",{class:"ibk-write-list-item__title"},[F("p",null,"제목")],-1),z={class:"ibk-write-list-item__input"},U={class:"ibk-write-list-item"},I=F("div",{class:"ibk-write-list-item__title"},[F("p",null,"내용")],-1),E={class:"ibk-write-list-item__input"},G={key:0,class:"ibk-write-list-item"},H={class:"ibk-write-list-item__title"},K={class:"ml-2 text-primary"},S={class:"ibk-write-list-file"},J=F("i",{class:"ibk-icon-24-folder"},null,-1),R={class:"ibk-write-list-file__delete"},W={key:1,class:"ibk-write-list-item"},X={class:"ibk-write-list-item__title"},Z={class:"ml-2 text-primary"},tt={class:"ibk-write-list-file"},lt=F("i",{class:"ibk-icon-24-folder"},null,-1),it={class:"ibk-write-list-file__delete"},et={class:"ibk-write-list-item"},st=F("div",{class:"ibk-write-list-item__title"},[F("p",null,"파일 업로드하기")],-1),at={class:"ibk-write-list-upload"},nt=F("div",{class:"ibk-write-list-upload__text"},"* 10MB 미만의 파일 최대 3개까지 첨부 가능합니다.",-1),ot={class:"ibk-write-button"},rt={class:"ibk-write-button__check"},ut=F("label",{for:"secrtPtngYn",class:"ml-2"}," 비밀글로 등록하기 ",-1),ct={class:"ibk-write-button__button"},dt=w({__name:"write",setup(w){t();const dt=l(),mt=_(dt.query.blbrQstnId),bt=_(!1),pt=k(),vt=_("등록"),kt=_("ADD");d({htmlAttrs:{class:"mobile-header-hide"}});const wt=f({blbrQstnId:Number(mt.value),blbrQstnTtlNm:"",qstnCon:"",useYn:"Y",secrtPtngYn:"N",cretTs:"",cncrId:"",questionAttachFileOutList:[],questionDeleteAtchList:[],uploadFileList:[],atchList:[]});_("");const _t=_({height:300});i();const ft=t=>{const l=["bytes","KB","MB","GB","TB","PB"];if(0===t)return`0 ${l[0]}`;const i=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,i)).toFixed(3))} ${l[i]}`},gt=async()=>{if(ht()){let t;if(!bt.value){bt.value=!0,await s(!0);try{t="ADD"===kt.value?await pt.saveQuestion(wt):await pt.modifyQuestion(wt),t.success?(alert(`문의가 ${vt.value}되었습니다`),e("/support")):alert(`문의 ${vt.value}중 오류가 발생하였습니다.`)}finally{await s(!1),bt.value=!1}}}},ht=()=>null==wt.blbrQstnTtlNm||""===wt.blbrQstnTtlNm?(alert("제목은 필수 입력값입니다."),!1):null!=yt(wt.qstnCon)&&""!==yt(wt.qstnCon)||(alert("내용은 필수 입력값입니다."),!1),yt=t=>{const l=document.createElement("div");return l.innerHTML=t,l.textContent||l.innerText||""},jt=(t,l)=>{null==t?wt.uploadFileList.splice(l,1):(wt.questionDeleteAtchList.push(t),wt.questionAttachFileOutList.splice(l,1))};return g((async()=>{Number(mt.value)>0?(await(async()=>{let t=await a().inqQuestionDtl({blbrQstnId:Number(mt.value)});const l=n(t);o.isSuccess(l)&&Object.assign(wt,l.response)})(),vt.value="수정",kt.value="MOD"):(vt.value="등록",kt.value="ADD")})),(t,l)=>{const i=r,s=v,a=h("froala"),n=u,o=p,d=c,k=b,w=m;return y(),j("div",Q,[F("div",V,[L(i,{icon:"ibk-icon-24-arrowleft",label:"목록",link:"",onClick:l[0]||(l[0]=l=>("navigateTo"in t?t.navigateTo:q(e))("/support"))})]),F("div",M,[F("div",O,[L(w,null,{content:T((()=>[F("div",Y,[F("div",$,[F("div",B,[P,F("div",z,[L(s,{type:"text",size:"large",placeholder:"제목을 입력해 주세요.",class:"w-full",modelValue:q(wt).blbrQstnTtlNm,"onUpdate:modelValue":l[1]||(l[1]=t=>q(wt).blbrQstnTtlNm=t)},null,8,["modelValue"])])]),F("div",U,[I,F("div",E,[L(a,{tag:"textarea",value:q(wt).qstnCon,"onUpdate:value":l[2]||(l[2]=t=>q(wt).qstnCon=t),config:_t.value},null,8,["value","config"])])]),q(wt).uploadFileList.length>0?(y(),j("div",G,[F("div",H,[F("p",null,[A("첨부파일 "),F("span",K,C(q(wt).uploadFileList.length),1)])]),F("div",S,[F("ul",null,[(y(!0),j(x,null,N(q(wt).uploadFileList,((t,l)=>(y(),j("li",{key:t.name+t.type+t.size},[L(n,{to:"/",class:"ibk-write-list-file__text"},{default:T((()=>[J,F("p",null,C(t.name),1),F("strong",null,C(ft(t.size)),1)])),_:2},1024),F("div",R,[L(i,{icon:"ibk-icon-24-close",link:"",rounded:"",onClick:t=>jt(null,l)},null,8,["onClick"])])])))),128))])])])):D("",!0),q(wt).questionAttachFileOutList&&q(wt).questionAttachFileOutList.length>0?(y(),j("div",W,[F("div",X,[F("p",null,[A("첨부파일 "),F("span",Z,C(q(wt).questionAttachFileOutList.length),1)])]),F("div",tt,[F("ul",null,[(y(!0),j(x,null,N(q(wt).questionAttachFileOutList,((t,l)=>(y(),j("li",{key:t.orcpFileNm+l},[L(n,{to:"/",class:"ibk-write-list-file__text"},{default:T((()=>[lt,F("p",null,C(t.orcpFileNm),1)])),_:2},1024),F("div",it,[L(i,{icon:"ibk-icon-24-close",link:"",rounded:"",onClick:i=>jt(t,l)},null,8,["onClick"])])])))),128))])])])):D("",!0),F("div",et,[st,F("div",at,[L(o),L(d,{modelValue:q(wt).uploadFileList,"onUpdate:modelValue":l[3]||(l[3]=t=>q(wt).uploadFileList=t)},null,8,["modelValue"]),nt])])]),F("div",ot,[F("div",rt,[L(k,{modelValue:q(wt).secrtPtngYn,"onUpdate:modelValue":l[4]||(l[4]=t=>q(wt).secrtPtngYn=t),binary:"",id:"secrtPtngYn","true-value":"Y","false-value":"N"},null,8,["modelValue"]),ut]),F("div",ct,[L(i,{label:"취소",severity:"secondary",outlined:"",size:"large",onClick:l[5]||(l[5]=l=>("navigateTo"in t?t.navigateTo:q(e))("/support"))}),L(i,{label:`${vt.value}하기`,severity:"primary",size:"large",onClick:gt},null,8,["label"])])])])])),_:1})])])])}}});export{dt as default};
