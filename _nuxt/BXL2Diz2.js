import{k as i,w as l,c as t,$ as s,a as e,b as a,t as o,U as r,s as n,_ as c}from"./hBzLN_-v.js";import{_ as d}from"./DpOa7q0-.js";import{u as b}from"./B5rvuSVl.js";import{s as m}from"./BXVnU6OR.js";import{s as u}from"./C6l2zQ4t.js";import{s as p}from"./Buxn3Aue.js";import{s as k}from"./BjcL5fjy.js";import{u as v}from"./CJg10Yi8.js";import{d as w,r as _,D as f,C as g,z as y,E as h,o as j,c as A,e as C,a as F,b as D,s as L,h as N,t as V,F as I,f as O,i as x,g as B}from"./BL-uwq_y.js";import"./5J_bqkhR.js";import"./D-wts8pO.js";import"./2NKARSpg.js";import"./YAbt-eb_.js";import"./BmbThKG-.js";import"./MXjtEwyk.js";import"./CpYj7tfd.js";import"./PTcOg-E-.js";import"./DqSW7-5V.js";import"./DnSsDbNR.js";const z={class:"ibk-background"},P={class:"ibk-mobile-back"},U={class:"ibk-write"},q={class:"ibk-inner"},M={class:"ibk-write-content"},T={class:"ibk-write-list"},$={class:"ibk-write-list-item"},W=C("div",{class:"ibk-write-list-item__title"},[C("p",null,"게시판 선택")],-1),Y={class:"ibk-write-list-item__input"},E={class:"ibk-write-list-item"},K=C("div",{class:"ibk-write-list-item__title"},[C("p",null,"제목")],-1),G={class:"ibk-write-list-item__input"},H={class:"ibk-write-list-item"},J=C("div",{class:"ibk-write-list-item__title"},[C("p",null,"내용")],-1),Q={class:"ibk-write-list-item__input"},R={key:0,class:"ibk-write-list-item"},S={class:"ibk-write-list-item__title"},X={class:"ml-2 text-primary"},Z={class:"ibk-write-list-file"},ii=C("i",{class:"ibk-icon-24-folder"},null,-1),li={style:{cursor:"pointer"}},ti={class:"ibk-write-list-file__delete"},si={class:"ibk-write-list-item"},ei=C("div",{class:"ibk-write-list-item__title"},[C("p",null,"파일 업로드하기")],-1),ai={class:"ibk-write-list-upload"},oi=C("div",{class:"ibk-write-list-upload__text"},"* 10MB 미만의 파일 최대 3개까지 첨부 가능합니다.",-1),ri={class:"ibk-write-button"},ni={class:"ibk-write-button__button"},ci=w({__name:"edit",setup(w){b({htmlAttrs:{class:"mobile-header-hide"}});const ci=i(),di=l(),bi=v(),mi=_(),ui=_(!1),pi=f({blbrNo:void 0,blbrCtgyId:void 0,blbrPtngId:void 0,bltApowCon:"",bltApowTtlNm:"",useYn:"Y",uploadFileList:[],commonAttachFileDeleteInList:[]}),ki=g((()=>di.query.blbrPtngId?"MOD":"ADD"));_();const vi=_({height:300});t();const wi=async()=>{if(pi.blbrNo){if(!ui.value)try{let i,l;ui.value=!0,"ADD"===ki.value?(i=await bi.saveBoardContents(pi),l="/social"):(i=await bi.modBoardContents(pi),l=`/social/${pi.blbrPtngId}`),i.success&&(alert("정상 처리 되었습니다"),ci.replace(l))}finally{ui.value=!1}}else o("게시판을 선택해 주세요")},_i=async()=>{if(!confirm("정말 삭제하시겠습니까?"))return;(await bi.delBoardContents(pi)).success&&(alert("정상 처리 되었습니다"),ci.replace("/social"))},fi=()=>{ci.go(-1)};return y((async()=>{if(await(async()=>{const i=await s(e().inqBoardList({cybrTriuBlbrKcd:"2"}));mi.value=a(i)})(),await(async()=>{const i=await bi.isFirstWrite(3),l=r.hasCachedForever("_isFirstWrite","social");i.response&&!l&&(alert("무단 제작/배포 금지에 동의하시고 작성하시기 바랍니다"),ci.go(-1))})(),di.query.blbrPtngId){const i=await bi.getBoardContentsDetail(Number(di.query.blbrPtngId));Object.assign(pi,i)}})),(i,l)=>{const t=n,s=k,e=p,a=h("froala"),o=c,r=u,b=d,v=m;return j(),A("div",z,[C("div",P,[F(t,{icon:"ibk-icon-24-arrowleft",label:"목록",link:""})]),C("div",U,[C("div",q,[F(v,null,{content:D((()=>[C("div",M,[C("div",T,[C("div",$,[W,C("div",Y,[F(s,{modelValue:L(pi).blbrNo,"onUpdate:modelValue":l[0]||(l[0]=i=>L(pi).blbrNo=i),size:"large",class:"w-full",options:L(mi),"option-label":"blbrNm","option-value":"blbrNo",placeholder:"선택",showClear:""},null,8,["modelValue","options"])])]),C("div",E,[K,C("div",G,[F(e,{modelValue:L(pi).bltApowTtlNm,"onUpdate:modelValue":l[1]||(l[1]=i=>L(pi).bltApowTtlNm=i),type:"text",size:"large",placeholder:"제목을 입력해 주세요.",class:"w-full"},null,8,["modelValue"])])]),C("div",H,[J,C("div",Q,[F(a,{value:L(pi).bltApowCon,"onUpdate:value":l[2]||(l[2]=i=>L(pi).bltApowCon=i),tag:"textarea",config:L(vi)},null,8,["value","config"])])]),L(pi).commonAttachFileOutList&&L(pi).commonAttachFileOutList.length>0?(j(),A("div",R,[C("div",S,[C("p",null,[N("첨부파일 "),C("span",X,V(L(pi).commonAttachFileOutList.length),1)])]),C("div",Z,[C("ul",null,[(j(!0),A(I,null,O(L(pi).commonAttachFileOutList,((i,l)=>(j(),A("li",null,[F(o,{class:"ibk-board-detail-file__text"},{default:D((()=>[ii,C("p",li,V(i.orcpFileNm),1)])),_:2},1024),C("div",ti,[F(t,{icon:"ibk-icon-24-close",link:"",rounded:"",onClick:t=>((i,l)=>{pi.commonAttachFileDeleteInList.push(i),pi.commonAttachFileOutList.splice(l,1)})(i,l)},null,8,["onClick"])])])))),256))])])])):x("",!0),C("div",si,[ei,C("div",ai,[F(r),F(b,{modelValue:L(pi).uploadFileList,"onUpdate:modelValue":l[3]||(l[3]=i=>L(pi).uploadFileList=i)},null,8,["modelValue"]),oi])])]),C("div",ri,[C("div",ni,[F(t,{label:"취소",severity:"secondary",outlined:"",size:"large",onClick:fi}),"MOD"===L(ki)?(j(),B(t,{key:0,label:"삭제",severity:"secondary",outlined:"",size:"large",class:"text-red-500",onClick:_i})):x("",!0),F(t,{label:"MOD"===L(ki)?"수정":"등록",severity:"primary",size:"large",onClick:wi,disabled:L(ui)},null,8,["label","disabled"])])])])])),_:1})])])])}}});export{ci as default};
