import{p as l,U as e,a,q as i,t as s,s as t,v as m}from"./hBzLN_-v.js";import{s as d}from"./BXBW32XK.js";import{s as n}from"./C4j-orEc.js";import{s as c}from"./Buxn3Aue.js";import{_ as o}from"./MXjtEwyk.js";import{u}from"./8WsJsEp4.js";import{d as r,r as p,z as v,A as k,o as b,g as y,b as f,e as g,a as N,c as h,t as w,s as C,F as _,f as V,i as x,B as D,h as z}from"./BL-uwq_y.js";const R={class:"ibk-dialog-back"},U={key:0,class:"ibk-dialog-apply__title"},Y={key:1,class:"ibk-dialog-apply__title"},j={class:"ibk-dialog-apply-contents"},q={class:"ibk-dialog-apply-item ibk-dialog-apply-item--line"},I=g("div",{class:"ibk-dialog-apply-item-head"},[g("div",{class:"ibk-dialog-apply-item-head__title"},"신청정보")],-1),T={class:"ibk-dialog-apply-item__table"},S={class:"pc"},A=g("colgroup",null,[g("col",{style:{width:"120px"}}),g("col",{style:{width:"240px"}}),g("col",{style:{width:"120px"}}),g("col",{style:{width:"240px"}})],-1),F=g("th",null,"신청자 정보",-1),B={colspan:"3"},H=g("th",null,"나의 점수",-1),O={colspan:"3"},P=g("th",null,"장소",-1),W=g("th",null,"입실일자",-1),E={class:"mo"},$=g("tr",null,[g("th",null,"신청자 정보")],-1),G=g("tr",null,[g("th",null,"나의 점수")],-1),J=g("tr",null,[g("td",null,"100점")],-1),K=g("tr",null,[g("th",null,"장소")],-1),L=g("tr",null,[g("th",null,"입실일자")],-1),M={class:"ibk-dialog-apply-item ibk-dialog-apply-item--line"},Q=g("div",{class:"ibk-dialog-apply-item-head"},[g("div",{class:"ibk-dialog-apply-item-head__title"},"투숙기간")],-1),X={class:"ibk-dialog-apply-form"},Z={class:"ibk-dialog-apply-form-select"},ll=g("div",{class:"ibk-dialog-apply-form-caution"},[z(" 신청 진행 중입니다. 아래 세부 정보 입력후 [최종 신청] 하셔야 신청이 완료됩니다."),g("br"),z(" ※ 동반가족 필수 입력 (입력된 가족 외 입소 제한) ")],-1),el={class:"grid"},al={class:"col-12"},il={class:"field"},sl=g("label",null,"입소자 명단",-1),tl={class:"ibk-dialog-apply-form-search"},ml={class:"ibk-dialog-apply-form-search-input"},dl={class:"ibk-dialog-apply-form-search-list"},nl={class:"col-12"},cl={class:"field"},ol=g("label",null,"비상연락망",-1),ul={class:"col-12"},rl={class:"field"},pl=g("label",null,"차량번호",-1),vl={class:"col-12"},kl={class:"field"},bl=g("label",null,"비고",-1),yl=g("div",{class:"ibk-dialog-apply-item"},[g("div",{class:"ibk-dialog-apply-item-head"},[g("div",{class:"ibk-dialog-apply-item-head__title"},"필수유의사항")]),g("div",{class:"ibk-dialog-apply-caution"},[g("p",null,"1. 입소정원은 5명, 차량은 1대만 이용 가능합니다."),g("p",null,"2. 수건등 세면도구는 지원되지 않으니 지참하시기 바랍니다."),g("p",null,"3. 미혼직원의 경우 부모님 동반 또는 동성(同性)의 동료 직원 동반시에만 입소 가능합니다."),g("p",null,"4. 애원동물 동반입소 금지합니다."),g("p",null,"5. 입소(16:00-24:00) 퇴소 (10:00) 시간을 준수합니다. (자정이후 입소불가)"),g("p",null,"6. 신청 후 3회 취소 시 1회 이용으로 간주되오니 신중히 신청합니다."),g("p",null,"7. 취소적용기준 및 사용제한 (당일취소, 무단불참, 본인불참, 객실미정리)에 대하여 숙지하였습니다."),g("p",null,"※ 당일취소란? 입소당일 휴일 입소인 경우 직전영업일")])],-1),fl={class:"ibk-dialog-apply-agree"},gl={class:"ibk-dialog-apply-agree-check"},Nl=g("label",{for:"agree",class:"ml-2"}," 상기내용을 숙지하였으며 동의합니다 ",-1),hl=g("p",null,"* 필히 유의사항을 숙지 후 체크해주시기 바랍니다.",-1),wl={class:"ibk-dialog-apply-button"},Cl=r({__name:"ResortFacilityRequestDialog",props:{item:{default:null},visible:{type:Boolean}},emits:["refresh","update:visible"],setup(r,{emit:z}){const Cl=l(),_l=u(),{visible:Vl}=o("visible"),xl=r,Dl=z,zl=p(!1),Rl=p(""),Ul=p([]),Yl=p("완료"),jl=p(!1),ql=()=>{jl.value||(Ul.value=[],Rl.value="",xl.item.ckinNmlsNm="",xl.item.emrnTpn="",xl.item.vhclNo="",xl.item.rmrkCon=""),Vl.value=!1},Il=async()=>{if(xl.item.cancelable){if((await a().rgsnCheckResortFacilityRequest(xl.item)).data.response>0)return alert("해당 회차에 이미 신청한 이력이 있습니다."),!1;{let a;await i(!0),xl.item.ldgnNdd=e.getDaysDifference(xl.item.vcfcCkinYmd,xl.item.vcfcCcotYmd);try{a=await _l.saveResortFacilityRequest(xl.item),a.success?(e.alert(`연수원 신청이 ${Yl.value}되었습니다`),await(async(l=!0)=>{Dl("refresh",l)})(),ql()):e.alert("연수원 신청중 오류가 발생하였습니다.")}catch(l){await i(!1),e.alert("연수원 신청중 오류가 발생하였습니다.")}finally{await i(!1)}}}else s("입실일기준 2주전까지만 수정 가능합니다.")},Tl=()=>{""!==Rl.value&&(xl.item.ckinNmlsNm.length>0&&(xl.item.ckinNmlsNm=xl.item.ckinNmlsNm+","),xl.item.ckinNmlsNm=xl.item.ckinNmlsNm+Rl.value,Ul.value=xl.item.ckinNmlsNm.split(",")),Rl.value=""};return v((async()=>{xl.item&&Number(xl.item.rsvtNo)>0&&(Yl.value="수정",jl.value=!0,xl.item.ckinNmlsNm?.length>0&&(Ul.value=xl.item.ckinNmlsNm?.split(",")))})),k((async()=>{await(async()=>{xl.item.dmrkScr=100;let l=await a().inqDmrkScr(xl.item);null!=l.data.response&&(xl.item.dmrkScr=100-l.data.response.dmrkScr)})()})),(l,a)=>{const i=t,s=c,o=n,u=d,r=m;return b(),y(r,{visible:C(Vl),"onUpdate:visible":a[6]||(a[6]=l=>D(Vl)?Vl.value=l:null),modal:"",class:"ibk-dialog ibk-dialog-apply"},{header:f((()=>[g("div",R,[N(i,{icon:"ibk-icon-24-back-black",text:"",onClick:a[0]||(a[0]=l=>Vl.value=!1)})]),jl.value?(b(),h("div",U,"연수원 이용 신청상세")):(b(),h("div",Y,"연수원 이용 신청하기"))])),footer:f((()=>[g("div",wl,[N(i,{label:"닫기",severity:"secondary",size:"large",outlined:"",class:"w-full",onClick:ql}),jl.value?(b(),y(i,{key:0,label:"수정하기",severity:"primary",size:"large",class:"w-full",onClick:Il,disabled:!zl.value},null,8,["disabled"])):(b(),y(i,{key:1,label:"신청하기",severity:"primary",size:"large",class:"w-full",onClick:Il,disabled:!zl.value},null,8,["disabled"]))])])),default:f((()=>[g("div",j,[g("div",q,[I,g("div",T,[g("div",S,[g("table",null,[A,g("tbody",null,[g("tr",null,[F,g("td",B,w(C(Cl).userInfo.deptDsncNm)+"・"+w(C(Cl).userInfo.blngHdqrDsncNm)+"・"+w(C(Cl).userInfo.userNm),1)]),g("tr",null,[H,g("td",O,w(xl.item.dmrkScr)+"점",1)]),g("tr",null,[P,g("td",null,w(xl.item.fcltPlacTcdNm),1),W,g("td",null,w(xl.item.vcfcCkinYmd)+". "+w(C(e).getDayOfWeek(xl.item.vcfcCkinYmd.replaceAll(".",""))),1)])])])]),g("div",E,[g("table",null,[g("tbody",null,[$,g("tr",null,[g("td",null,w(C(Cl).userInfo.deptDsncNm)+"・"+w(C(Cl).userInfo.blngHdqrDsncNm)+"・"+w(C(Cl).userInfo.userNm),1)]),G,J,K,g("tr",null,[g("td",null,w(xl.item.fcltPlacTcdNm),1)]),L,g("tr",null,[g("td",null,w(xl.item.vcfcCkinYmd)+". "+w(C(e).getDayOfWeek(xl.item.vcfcCkinYmd.replaceAll(".",""))),1)])])])])])]),g("div",M,[Q,g("div",X,[g("div",Z,[g("h4",null,w(xl.item.vcfcCkinYmd)+" ~ "+w(xl.item.vcfcCcotYmd),1)]),ll,g("div",el,[g("div",al,[g("div",il,[sl,g("div",tl,[g("div",ml,[N(s,{modelValue:Rl.value,"onUpdate:modelValue":a[1]||(a[1]=l=>Rl.value=l),type:"text",size:"large",class:"w-full"},null,8,["modelValue"]),N(i,{label:"추가",severity:"primary",size:"large",onClick:Tl})]),g("div",dl,[Ul.value&&Ul.value.length>0?(b(!0),h(_,{key:0},V(Ul.value,((l,e)=>(b(),y(o,{key:l,label:l,onRemove:l=>(l=>{let e=[...Ul.value];e.splice(l,1),Ul.value=e,xl.item.ckinNmlsNm="",Ul.value.length>0&&Ul.value.forEach(((l,e)=>{e>0&&(xl.item.ckinNmlsNm=xl.item.ckinNmlsNm+","),xl.item.ckinNmlsNm=xl.item.ckinNmlsNm+l}))})(e),removable:""},null,8,["label","onRemove"])))),128)):x("",!0)])])])]),g("div",nl,[g("div",cl,[ol,g("div",null,[N(s,{modelValue:xl.item.emrnTpn,"onUpdate:modelValue":a[2]||(a[2]=l=>xl.item.emrnTpn=l),type:"text",size:"large",placeholder:"비상연락망을 입력해주세요.",class:"w-full"},null,8,["modelValue"])])])]),g("div",ul,[g("div",rl,[pl,g("div",null,[N(s,{modelValue:xl.item.vhclNo,"onUpdate:modelValue":a[3]||(a[3]=l=>xl.item.vhclNo=l),type:"text",size:"large",placeholder:"차량번호를 입력해주세요.",class:"w-full"},null,8,["modelValue"])])])]),g("div",vl,[g("div",kl,[bl,g("div",null,[N(s,{modelValue:xl.item.rmrkCon,"onUpdate:modelValue":a[4]||(a[4]=l=>xl.item.rmrkCon=l),type:"text",size:"large",placeholder:"내용을 입력해주세요.",class:"w-full"},null,8,["modelValue"])])])])])])]),yl,g("div",fl,[g("div",gl,[N(u,{modelValue:zl.value,"onUpdate:modelValue":a[5]||(a[5]=l=>zl.value=l),inputId:"agree",binary:"","true-value":!0,"false-value":!1},null,8,["modelValue"]),Nl]),hl])])])),_:1},8,["visible"])}}});export{Cl as _};
