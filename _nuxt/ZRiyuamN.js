import{p as e,s as l,U as t,w as n,k as i,_ as r}from"./DK14NLN9.js";import{u as s}from"./CfJak1Tl.js";import{u as b}from"./DuXMFJyJ.js";import{s as o}from"./CKb8tGt0.js";import{d as a,C as m,D as c,r as d,o as u,c as p,e as I,t as g,s as k,a as v,B as C,G as f,F as y,h,g as P,i as N,f as _,v as R,z as B,b as w}from"./BL-uwq_y.js";import{d as x}from"./DK9nc3ZC.js";const A={class:"ibk-comment-form__name"},L={class:"ibk-comment-form__textarea"},Y={class:"ibk-comment-form__button"},j=a({__name:"SocialBoardCommentsForm",props:{blbrNo:null,blbrPtngId:null,blbrRpcmId:null,isBorder:null},emits:["refresh"],setup(t,{emit:n}){const i=b(),r=e(),s=t,a=m((()=>s.isBorder?{border:"solid 1px #eeeeee"}:{})),h=n,P=c({blbrNo:s.blbrNo,blbrPtngId:s.blbrPtngId,blbrRpcmId:void 0,hgrnBlbrRpcmId:0,blbrRpcmCon:"",useYn:"Y"}),N=d(""),_=async()=>{P.blbrNo=s.blbrNo,P.blbrPtngId=s.blbrPtngId,P.hgrnBlbrRpcmId=s.blbrRpcmId||0,P.blbrRpcmCon=N.value;(await i.saveBoardContentsComment(P)).success&&(N.value="",alert("정상 처리 되었습니다"),h("refresh"))};return(e,t)=>{const n=o,i=l;return u(),p(y,null,[I("div",A,g(k(r).userInfo.userNm||""),1),I("div",L,[v(n,{modelValue:k(N),"onUpdate:modelValue":t[0]||(t[0]=e=>C(N)?N.value=e:null),style:f(k(a)),class:"p-2"},null,8,["modelValue","style"])]),I("div",Y,[v(i,{label:"취소",severity:"secondary",text:""}),v(i,{label:"등록",severity:"primary",class:"tonal",onClick:_})])],64)}}}),S={class:"ibk-comment-list-item__info"},E={class:"ibk-comment-list-item__text"},F={key:1},T={class:"ibk-comment-list-item__button"},$={class:"ibk-comment-list-item__menu"},V=I("li",null,null,-1),O={key:0},q=I("i",{class:"ibk-icon-16-reply-primary"},null,-1),D=I("i",{class:"ibk-icon-16-reply-arrow"},null,-1),M={key:0,class:"ibk-comment"},U=a({__name:"SocialBoardCommentsItemContents",props:{item:null,blbrNo:null,blbrPtngId:null},emits:["refresh"],setup(n,{emit:i}){const r=b(),s=e(),a=n,c=i,f=d(""),R=m((()=>s.userInfo&&s.userInfo.userId===a.item.cncrId)),B=async()=>{if(a.item.isActive){const e=r.openedCommentId.findIndex((e=>e===a.item.blbrRpcmId));e>0&&r.openedCommentId.splice(e,1)}else r.openedCommentId.push(a.item.blbrRpcmId),await r.getBoardContentsCommentList(Number(a.blbrPtngId),Number(a.item.blbrRpcmId));a.item.isActive=!a.item.isActive},w=()=>{f.value=a.item.blbrRpcmCon,a.item.isEdit=!0},x=()=>{f.value="",a.item.isEdit=!1},A=async()=>{if(!confirm("정말 삭제하시겠습니까?"))return;const e={blbrNo:a.item.blbrNo,blbrPtngId:a.blbrPtngId,hgrnBlbrRpcmId:a.item.hgrnBlbrRpcmId||0,blbrRpcmId:a.item.blbrRpcmId};(await r.delBoardContentsComment(e)).success&&(alert("정상 처리 되었습니다"),Y())},L=async()=>{const e={blbrNo:a.item.blbrNo,blbrPtngId:a.blbrPtngId,hgrnBlbrRpcmId:a.item.hgrnBlbrRpcmId||0,blbrRpcmId:a.item.blbrRpcmId,blbrRpcmCon:f.value,useYn:"Y"};(await r.modBoardContentsComment(e)).success&&(alert("정상 처리 되었습니다"),Y())},Y=()=>{c("refresh")};return(e,i)=>{const r=o,s=l,b=j,m=U;return u(),p(y,null,[I("div",S,[I("strong",null,g(a.item.cncrName),1),h(" "+g(k(t).getTimeDifference(a.item.hrdSysLastMdfcTs)),1)]),I("div",E,[a.item.isEdit?(u(),P(r,{key:0,modelValue:k(f),"onUpdate:modelValue":i[0]||(i[0]=e=>C(f)?f.value=e:null),class:"w-full p-1"},null,8,["modelValue"])):(u(),p("p",F,g(a.item.blbrRpcmCon),1))]),I("div",T,[k(R)?(u(),P(s,{key:0,label:"삭제",text:"",class:"text-red-500",onClick:A})):N("",!0),!a.item.isEdit&&k(R)?(u(),P(s,{key:1,label:"수정",text:"",class:"text-gray-900",onClick:w})):N("",!0),a.item.isEdit&&k(R)?(u(),P(s,{key:2,label:"취소",text:"",class:"text-gray-900",onClick:x})):N("",!0),a.item.isEdit&&k(R)?(u(),P(s,{key:3,label:"저장",text:"",class:"text-blue-900",onClick:L})):N("",!0)]),I("div",$,[I("ul",null,[V,a.item.hgrnBlbrRpcmId&&0!==a.item.hgrnBlbrRpcmId?N("",!0):(u(),p("li",O,[I("button",{class:"text-primary",onClick:B},[q,h(g(`답글 ${a.item?.commentCount?.toLocaleString()||0}개`),1),D])]))])]),a.item.isActive?(u(),p("div",M,[v(b,{blbrNo:a.item.blbrNo,blbrPtngId:a.blbrPtngId,blbrRpcmId:a.item.blbrRpcmId,onRefresh:Y,"is-border":!0},null,8,["blbrNo","blbrPtngId","blbrRpcmId"]),(u(!0),p(y,null,_(n.item.children,((e,l)=>(u(),P(m,{key:`${e.blbrRpcmId}_${l}`,item:e,blbrPtngId:a.blbrPtngId,onRefresh:Y},null,8,["item","blbrPtngId"])))),128))])):N("",!0)],64)}}}),z=a({__name:"SocialBoardCommentsItem",props:{item:null,blbrPtngId:null},emits:["refresh"],setup(e,{emit:l}){b();const t=e,n=l,i=()=>{n("refresh")};return(l,n)=>(u(),p("div",{class:R({"ibk-comment-list-item active":e.item.isActive,"ibk-comment-list-item":!e.item.isActive})},[v(U,{item:t.item,blbrPtngId:t.blbrPtngId,onRefresh:i},null,8,["item","blbrPtngId"])],2))}}),H={class:"ibk-comment"},G={class:"ibk-comment__title"},J={class:"ibk-comment-form"},K={class:"ibk-comment-list"},Q=a({__name:"SocialBoardComments",props:{blbrNo:null,blbrPtngId:null,commentCount:null},emits:["refresh"],setup(e,{emit:l}){const t=b(),n=e,i=l;function r(){i("refresh")}return d(!1),(e,l)=>{const i=z;return u(),p("div",H,[I("div",G,[h("댓글 "),I("strong",null,g(n.commentCount),1)]),I("div",J,[v(j,{blbrNo:n.blbrNo,blbrPtngId:n.blbrPtngId,onRefresh:r},null,8,["blbrNo","blbrPtngId"])]),I("div",K,[(u(!0),p(y,null,_(k(t).socialBoardContentsCommentList,((e,l)=>(u(),P(i,{key:`${e.blbrPtngId}_${l}`,item:e,blbrNo:n.blbrNo,blbrPtngId:n.blbrPtngId,onRefresh:r},null,8,["item","blbrNo","blbrPtngId"])))),128))])])}}}),W={class:"ibk-inner"},X={class:"ibk-board"},Z={class:"ibk-board-head"},ee={class:"ibk-board-head__button"},le={class:"ibk-board-inner"},te={class:"ibk-board-detail"},ne={class:"ibk-board-detail-head"},ie={class:"ibk-board-detail-head__title"},re={class:"ibk-board-detail-head-contents"},se={class:"ibk-board-detail-head__info"},be=I("i",{class:"ibk-icon-16-view"},null,-1),oe={class:"ibk-board-detail-head__button"},ae={class:"ibk-board-detail-contents"},me=["innerHTML"],ce={key:0,class:"ibk-board-detail-file"},de=I("i",{class:"ibk-icon-24-folder"},null,-1),ue={style:{cursor:"pointer"}},pe=I("p",null,"좋아요",-1),Ie=a({__name:"index",setup(t){s({htmlAttrs:{class:"mobile-header-hide"}});const o=n(),a=i(),d=b(),C=e(),f=c({blbrNo:void 0,blbrPtngId:void 0,likeYn:"N",bltApowTtlNm:"",bltApowCon:"",cncrId:"",inqCnt:0,likeCnt:0,commentCnt:0,blbrCtgyId:void 0}),A=m((()=>"Y"===f?.likeYn)),L=m((()=>C.userInfo&&C.userInfo.userId===f.cncrId)),Y=()=>{a.push({path:"/social/edit",query:{blbrPtngId:o.params.blbrPtngId}})},j=async()=>{(await d.saveBoardContentsLike(f.blbrNo,f?.blbrPtngId)).success&&(f.likeYn=A.value?"N":"Y")},S=async()=>{if(!confirm("정말 삭제하시겠습니까?"))return;(await d.delBoardContents({blbrNo:f.blbrNo,blbrPtngId:f?.blbrPtngId})).success&&(alert("정상 처리 되었습니다"),a.replace("/social"))},E=async()=>{await d.getBoardContentsCommentList(Number(o.params.blbrPtngId))},F=async()=>{const e=await d.getBoardContentsDetail(Number(o.params.blbrPtngId));Object.assign(f,e),E()},T=()=>{a.go(-1)};return B((async()=>{if(o.params.blbrPtngId){const e=await d.getBoardContentsDetail(Number(o.params.blbrPtngId));e?(Object.assign(f,e),E()):(alert("해당 게시글이 없습니다"),a.go(-1))}else alert("해당 게시글이 없습니다"),a.go(-1)})),(e,t)=>{const n=l,i=r;return u(),p("div",W,[I("div",X,[I("div",Z,[I("div",ee,[v(n,{icon:"ibk-icon-16-arrowleft",label:"목록",severity:"secondary",outlined:"",onClick:T})])]),I("div",le,[I("div",te,[I("div",ne,[I("div",ie,[I("p",null,g(k(f)?.bltApowTtlNm),1)]),I("div",re,[I("div",se,[I("ul",null,[I("li",null,[I("strong",null,g(k(f)?.cncrNm),1)]),I("li",null,g(k(f)?.cretTs),1),I("li",null,[be,h(" "+g(k(f)?.inqCnt?.toLocaleString()||0),1)])])]),I("div",oe,[k(L)?(u(),P(n,{key:0,label:"삭제",severity:"secondary",outlined:"",class:"text-red-500",onClick:S})):N("",!0),k(L)?(u(),P(n,{key:1,label:"수정",severity:"secondary",onClick:Y})):N("",!0)])])]),I("div",ae,[I("p",{innerHTML:k(f)?.bltApowCon},null,8,me)]),k(f).commonAttachFileOutList&&k(f).commonAttachFileOutList.length>0?(u(),p("div",ce,[I("ul",null,[(u(!0),p(y,null,_(k(f).commonAttachFileOutList,((e,l)=>(u(),p("li",null,[v(i,{onClick:l=>(async(e,l,t)=>{const n=`/v1/file/download/social/${e}/${l}`;await x(n,t)})(e.atchId,e.atchSqn,e.orcpFileNm),class:"ibk-board-detail-file__text"},{default:w((()=>[de,I("p",ue,g(e.orcpFileNm),1)])),_:2},1032,["onClick"])])))),256))])])):N("",!0),I("div",{class:R(["ibk-board-detail-like",k(A)?"active":""])},[v(n,{icon:k(A)?"ibk-icon-32-like-active":"ibk-icon-32-like",severity:"secondary",rounded:"",size:"large",onClick:j},null,8,["icon"]),pe],2),v(Q,{blbrNo:k(f).blbrNo,blbrPtngId:k(o).params.blbrPtngId,commentCount:k(f).commentCnt,onRefresh:F},null,8,["blbrNo","blbrPtngId","commentCount"])])])])])}}});export{Ie as default};
