import{k as t,U as e,m as a,_ as s,l as i,p as l,t as o,s as n,v as r,w as u}from"./hBzLN_-v.js";import{u as m}from"./B7OEeUbr.js";import{d,o as c,g as b,b as v,e as p,t as y,c as g,a as k,i as _,h as f,s as N,a4 as C,a5 as h,r as w,D as q,A as S,F as T,f as j,B as D,v as x,w as B}from"./BL-uwq_y.js";import{$ as I}from"./CSYIwgfq.js";import{s as V}from"./DbDrScBj.js";import{s as $}from"./cqI91-xh.js";import{_ as A}from"./MXjtEwyk.js";import{s as U,a as z}from"./KDJte5T5.js";import{s as L}from"./B4KoFMIm.js";import{s as P}from"./DvXKQYBp.js";import{s as Q,a as Y}from"./DqSW7-5V.js";import{s as F}from"./Buxn3Aue.js";import{s as R,a as O}from"./Il8aVj68.js";import"./CpYj7tfd.js";import"./BjcL5fjy.js";import"./2NKARSpg.js";import"./PTcOg-E-.js";import"./DnSsDbNR.js";import"./Bu99-T5e.js";import"./CnSse8fh.js";import"./BWf6y3Mf.js";const H={class:"ibk-board-list-item__start"},K={class:"ibk-board-list-item__number"},M={class:"ibk-board-list-item__title"},E={key:0,class:"ibk-board-list-item__badge"},G={key:1,class:"ibk-icon-24-clip"},J={key:2,class:"ibk-social-list-item__info"},W=(t=>(C("data-v-770e7071"),t=t(),h(),t))((()=>p("i",{class:"ibk-icon-16-reply-black"},null,-1))),X={class:"ibk-board-list-item__end"},Z={class:"ibk-board-list-item__date"},tt=i(d({__name:"CommunityBoardContentsItem",props:{item:null,index:null,paging:null},setup(i){t(),m();const l=i;return(t,o)=>{const n=a,r=s;return c(),b(r,{to:`/community/${l.item.blbrPtngId}`,class:"ibk-board-list-item"},{default:v((()=>[p("div",H,[p("div",K,y(i.paging.totalCount-(i.paging.pageNo-1)*i.paging.pageSize-l.index),1),p("div",M,[l.item.ctgyNm?(c(),g("div",E,[k(n,{value:l.item.ctgyNm,style:{background:"#f2f2f2",color:"#5a5e6c"}},null,8,["value"])])):_("",!0),p("p",null,y(l.item.bltApowTtlNm),1),l.item.commonAttachFileOutList?.length?(c(),g("i",G)):_("",!0),l.item.commentCnt?(c(),g("div",J,[p("ul",null,[p("li",null,[W,f(y(l.item.commentCnt?.toLocaleString()||0),1)])])])):_("",!0)])]),p("div",X,[p("div",Z,y(N(e).dateDefault(l.item.cretTs??"2025.01.01 12:25")),1)])])),_:1},8,["to"])}}}),[["__scopeId","data-v-770e7071"]]),et={class:"ibk-dialog-back"},at=p("div",{class:"ibk-dialog-survey__title"},"설문",-1),st={class:"ibk-test"},it={class:"ibk-test-content"},lt={class:"ibk-test-head"},ot={class:"ibk-test-head__title"},nt={class:"ibk-test-head__date"},rt={class:"ibk-test-head-info"},ut=p("div",{class:"ibk-test-head-info__title"},"설문안내",-1),mt=["innerHTML"],dt={class:"ibk-test-list"},ct={key:0,class:"ibk-test-list-item"},bt={class:"ibk-test-list-item__title"},vt={class:"ibk-test-list-item__input"},pt={key:1,class:"ibk-test-list-item"},yt={class:"ibk-test-list-item__title"},gt={class:"ibk-test-list-item__answer"},kt={key:0},_t=["for"],ft={class:"ibk-dialog-review-button"},Nt=d({__name:"CommunitySurveyDetailDialog",props:{item:{default:null},visible:{type:Boolean}},emits:["refresh","update:visible"],setup(t,{emit:a}){l();const s=m(),{visible:i}=A("visible"),u=t,d=w({}),C=w(),h=w(),x=w(""),B=w([]),U=w("제출"),z=w(!1),L=()=>{z.value||(B.value=[],x.value="",u.item.ckinNmlsNm="",u.item.emrnTpn="",u.item.vhclNo="",u.item.rmrkCon=""),i.value=!1},P=q({comQstrId:0}),Q=async()=>{await I({title:"설문 취소 확인",message:`설문 ${U.value}을 취소하시겠습니까?`})&&(e.notify({message:"설문 작성이 취소되었습니다.",variant:"info"}),L())},Y=async()=>{if(await I({title:"설문 제출 확인",message:`설문을 ${U.value}하시겠습니까?`}))try{const t=[];for(const[e,a]of Object.entries(d.value)){const s={comQstrId:u.item.comQstrId,qstrNo:u.item.qstrNo,qsitNo:parseInt(e),useYn:"Y",rplyCon:Array.isArray(a)?a.join(","):a};t.push(s)}if(0==t.length)return void(await o("작성한 설문이 없습니다.</br>설문을 작성후 제출 해 주세요."));await s.submitCommonSurvey(t),e.notify({message:`설문이 ${U.value}되었습니다.`,variant:"success"}),L()}catch(t){e.notify({message:"설문 제출 중 오류가 발생했습니다.",variant:"error"})}};return S((async()=>{u.item.answerCount>0&&(U.value="수정"),P.comQstrId=u.item.comQstrId,P.qstrNo=u.item.qstrNo,await(async()=>{await s.getCommonSurveyPreview(P),C.value=s.communitySurveyPreviewData.data.response,h.value=s.communitySurveyPreviewData.data.response})(),await(async()=>{await s.getCommonSurveyAnswer(P);for(const[t,e]of Object.entries(s.communitySurveyAnswerData.data.response))d.value[parseInt(t)+1]="string"==typeof e.rplyCon&&e.rplyCon.includes(",")?e.rplyCon.split(","):e.rplyCon})()})),(t,e)=>{const a=n,s=$,l=V,o=r;return c(),b(o,{visible:N(i),"onUpdate:visible":e[1]||(e[1]=t=>D(i)?i.value=t:null),modal:"",class:"ibk-dialog ibk-dialog-survey"},{header:v((()=>[p("div",et,[k(a,{icon:"ibk-icon-24-back-black",text:"",onClick:e[0]||(e[0]=t=>i.value=!1)})]),at])),footer:v((()=>[p("div",ft,[k(a,{label:"취소",severity:"secondary",size:"large",outlined:"",class:"w-full",onClick:Q}),k(a,{label:U.value,severity:"primary",size:"large",class:"w-full",onClick:Y},null,8,["label"])])])),default:v((()=>[p("div",st,[p("div",it,[p("div",lt,[p("div",ot,y(u.item.qstrNm),1),p("div",nt,[p("span",null,y(u.item.qstrSttgTs.slice(0,16))+" - "+y(u.item.qstrFnshTs.slice(0,16)),1)]),p("div",rt,[ut,p("div",{class:"ibk-test-head-info__text",innerHTML:u.item.qstrCon},null,8,mt)])]),p("div",dt,[(c(!0),g(T,null,j(C.value,((t,e)=>(c(),g(T,{key:e},[1===t.rankNo?(c(),g(T,{key:0},["03"===t.qsitKcd?(c(),g("div",ct,[p("div",bt,[p("p",null,[p("strong",null,y(t.qsitNo)+".",1),f(" "+y(t.qsitTtlNm),1)])]),p("div",vt,[k(s,{modelValue:d.value[t.qsitNo],"onUpdate:modelValue":e=>d.value[t.qsitNo]=e,autoResize:!0,rows:"3",placeholder:"답변을 입력해주세요."},null,8,["modelValue","onUpdate:modelValue"])])])):(c(),g("div",pt,[p("div",yt,[p("p",null,[p("strong",null,y(t.qsitNo)+".",1),f(" "+y(t.qsitTtlNm),1)])]),p("div",gt,[p("ol",null,[(c(!0),g(T,null,j(h.value,((e,a)=>(c(),g(T,{key:a},[t.qsitNo===e.qsitNo?(c(),g("li",kt,[k(l,{modelValue:d.value[e.qsitNo],"onUpdate:modelValue":t=>d.value[e.qsitNo]=t,inputId:`question_${t.qsitNo}_option_${e.lkngNo}`,value:e.lkngNo.toString()},null,8,["modelValue","onUpdate:modelValue","inputId","value"]),p("label",{for:`question_${t.qsitNo}_option_${e.lkngNo}`},y(e.lkngCon),9,_t)])):_("",!0)],64)))),128))])])]))],64)):_("",!0)],64)))),128))])])])])),_:1},8,["visible"])}}}),Ct={class:"ibk-board-survey-item"},ht={class:"ibk-board-survey-item__text"},wt={class:"ibk-board-survey-item__title"},qt={class:"ibk-board-survey-item__date"},St=d({__name:"CommunitySurveyContentsItem",props:{item:null,index:null,paging:null},setup(e){t(),m();const a=w("진행중"),s=w("설문보기"),i=e,l=new Date,o=q({pageSize:5,pageNo:1,qsitTtlNm:null,useYn:"Y"}),r=q({visible:!1,item:o});return S((async()=>{if(i.item.answerCount>0)a.value="완료",s.value="설문보기";else{const t=new Date(i.item.qstrSttgTs),e=new Date(i.item.qstrFnshTs);a.value=l>=t&&l<=e?"진행중":"종료",s.value=l>=t&&l<=e?"설문보기":"설문종료"}})),(t,e)=>{const l=n;return c(),g(T,null,[p("div",Ct,[p("div",ht,[p("div",wt,[p("strong",{class:x({"text-primary":"종료"!==N(a)})},y(N(a)),3),p("p",null,y(i.item.qstrNm),1)]),p("div",qt,y(i.item.qstrSttgTs.slice(0,16))+" - "+y(i.item.qstrFnshTs.slice(0,16)),1)]),k(l,{label:N(s),disabled:"설문종료"==N(s),severity:"secondary",onClick:e[0]||(e[0]=t=>{return e=i.item,r.visible=!0,void(r.item=e);var e})},null,8,["label","disabled"])]),N(r).visible?(c(),b(Nt,{key:0,visible:N(r).visible,"onUpdate:visible":e[1]||(e[1]=t=>N(r).visible=t),item:N(r).item,modal:"",class:"ibk-dialog ibk-dialog-apply"},null,8,["visible","item"])):_("",!0)],64)}}}),Tt={class:"ibk-inner"},jt={class:"ibk-board"},Dt=p("div",{class:"ibk-board-head ibk-board-head--tab"},[p("h1",null,"커뮤니티"),p("div",{class:"mo"})],-1),xt={class:"notice"},Bt={class:"ibk-board-list-head"},It={class:"pc"},Vt={class:"ibk-board-list-head__start"},$t={class:"ibk-board-list-head__end"},At={class:"ibk-board-search"},Ut={class:"ibk-board-search__button"},zt={class:"ibk-board-list"},Lt={class:"mo"},Pt={key:2,class:"ibk-board-list-none"},Qt={class:"ibk-board-list-none__text"},Yt={class:"text-primary"},Ft={class:"notice"},Rt={class:"ibk-board-list-head"},Ot={class:"pc"},Ht={class:"ibk-board-list-head__start"},Kt={class:"ibk-board-list-head__end"},Mt={class:"ibk-board-search"},Et={class:"ibk-board-search__button"},Gt={class:"ibk-board-list"},Jt={class:"mo"},Wt=d({__name:"Community",setup(t){const e=m(),a=u(),s=q({pageSize:5,pageNo:1,cybrTriuBlbrKcd:"1",blbrNo:"1",bltApowTtlNm:null}),i=q({pageSize:5,pageNo:1,qsitTtlNm:null,useYn:"Y"}),l=w("");B((()=>a.query),(()=>{e.currentTab=a.query.tab||"1"}),{deep:!0,immediate:!0}),S((async()=>{await e.getBoardList(),await o()}));const o=async()=>{e.communityBoardContentsData.contents=[],e.communitySurveyData.contents=[],"3"==e.currentTab?await e.getCommonSurveyList(i,!0):(s.blbrNo=e.currentTab,await e.getBoardContentsList(s,!0))},r=async(t=!0)=>{t&&(s.pageNo=1),await o()},d=async t=>{s.bltApowTtlNm=null,i.qsitTtlNm=null,e.currentTab=t?t.blbrNo.toString():"3",await r()},C=t=>{s.pageNo=t.page+1,r(!1)},h=()=>{l.value=s.bltApowTtlNm,r(!0)};return(t,a)=>{const o=R,r=O,u=Q,m=F,w=Y,q=n,S=tt,D=P,x=L,B=St,I=U,V=z;return c(),g("div",Tt,[p("div",jt,[Dt,k(V,{value:N(e).currentTab,"onUpdate:value":a[7]||(a[7]=t=>N(e).currentTab=t)},{default:v((()=>[k(r,null,{default:v((()=>[(c(!0),g(T,null,j(N(e).communityBoardList,(t=>(c(),b(o,{item:t,key:t.blbrNo,value:t.blbrNo?.toString()??"1",onClick:e=>d(t)},{default:v((()=>[f(y(t.blbrNm),1)])),_:2},1032,["item","value","onClick"])))),128)),k(o,{value:"3",onClick:a[0]||(a[0]=t=>d(null))},{default:v((()=>[f("설문")])),_:1})])),_:1}),k(I,null,{default:v((()=>[(c(!0),g(T,null,j(N(e).communityBoardList,(t=>(c(),b(x,{key:t.blbrNo,value:t.blbrNo?.toString()??"1"},{default:v((()=>[p("div",xt,[p("div",Bt,[p("div",It,[p("div",Vt,[p("h2",null,[f(" 전체 "),p("strong",null,y(N(e).communityBoardContentsData.paging.totalCount),1)])])]),p("div",$t,[p("div",At,[k(w,null,{default:v((()=>[k(u,{class:"ibk-icon-16-search"}),k(m,{placeholder:"검색어를 입력하세요.",modelValue:N(s).bltApowTtlNm,"onUpdate:modelValue":a[1]||(a[1]=t=>N(s).bltApowTtlNm=t)},null,8,["modelValue"])])),_:1}),p("div",Ut,[k(q,{label:"검색",severity:"primary",onClick:a[2]||(a[2]=t=>h())})])])])]),p("div",zt,[p("div",Lt,[p("h2",null,[f(" 전체 "),p("strong",null,y(N(e).communityBoardContentsData.paging.totalCount),1)])]),0!=N(e).communityBoardContentsData.paging.totalCount?(c(!0),g(T,{key:0},j(N(e).communityBoardContentsData.contents,((t,a)=>(c(),b(S,{key:`${t.blbrPtngId}_${a}`,item:t,index:a,paging:N(e).communityBoardContentsData.paging},null,8,["item","index","paging"])))),128)):_("",!0),0!=N(e).communityBoardContentsData.paging.totalCount?(c(),b(D,{key:1,rows:N(s).pageSize,totalRecords:t.contentsCount,onPage:a[3]||(a[3]=t=>C(t))},null,8,["rows","totalRecords"])):(c(),g("div",Pt,[p("div",Qt,[p("span",Yt,y(N(l)),1),f(" 에 대한 검색 결과가 없습니다. ")])]))])])])),_:2},1032,["value"])))),128)),k(x,{key:"3",value:"3"},{default:v((()=>[p("div",Ft,[p("div",Rt,[p("div",Ot,[p("div",Ht,[p("h2",null,[f(" 전체 "),p("strong",null,y(N(e).communitySurveyData.paging.totalCount),1)])])]),p("div",Kt,[p("div",Mt,[k(w,null,{default:v((()=>[k(u,{class:"ibk-icon-16-search"}),k(m,{placeholder:"검색어를 입력하세요.",modelValue:N(i).qstrNm,"onUpdate:modelValue":a[4]||(a[4]=t=>N(i).qstrNm=t)},null,8,["modelValue"])])),_:1}),p("div",Et,[k(q,{label:"검색",severity:"primary",onClick:a[5]||(a[5]=t=>h())})])])])]),p("div",Gt,[p("div",Jt,[p("h2",null,[f(" 전체 "),p("strong",null,y(N(e).communitySurveyData.paging.totalCount),1)])]),0!=N(e).communitySurveyData.paging.totalCount?(c(!0),g(T,{key:0},j(N(e).communitySurveyData.contents,((t,a)=>(c(),b(B,{key:`${t.comQstrId}_${a}`,item:t,index:a,paging:N(e).communitySurveyData.paging},null,8,["item","index","paging"])))),128)):_("",!0),0!=N(e).communitySurveyData.paging.totalCount?(c(),b(D,{key:1,rows:N(s).pageSize,totalRecords:N(e).communitySurveyData.paging.totalCount,onPage:a[6]||(a[6]=t=>C(t))},null,8,["rows","totalRecords"])):_("",!0)])])])),_:1})])),_:1})])),_:1},8,["value"])])])}}}),Xt=d({__name:"index",setup:t=>(t,e)=>(c(),b(Wt))});export{Xt as default};
