import{u as t,w as e,c as l,y as s,q as i,a,x as o,U as n,_ as r,s as u}from"./hBzLN_-v.js";import{_ as c}from"./DpOa7q0-.js";import{u as d}from"./B5rvuSVl.js";import{s as m}from"./BXVnU6OR.js";import{s as p}from"./BXBW32XK.js";import{s as v}from"./C6l2zQ4t.js";import{s as b}from"./Buxn3Aue.js";import{u as k}from"./hDZph0YJ.js";import{d as w,r as _,D as f,A as y,E as g,o as h,c as N,e as j,a as C,b as L,s as D,h as B,t as A,F as q,f as x,i as F}from"./BL-uwq_y.js";import"./5J_bqkhR.js";import"./D-wts8pO.js";import"./2NKARSpg.js";import"./YAbt-eb_.js";import"./BmbThKG-.js";import"./MXjtEwyk.js";import"./CpYj7tfd.js";import"./DfQRmz6m.js";const T={class:"ibk-background"},Q={class:"ibk-write"},$={class:"ibk-inner"},V={class:"ibk-write-content"},M={class:"ibk-write-list"},O={class:"ibk-write-list-item"},Y=j("div",{class:"ibk-write-list-item__title"},[j("p",null,"제목")],-1),E={class:"ibk-write-list-item__input"},P={class:"ibk-write-list-item"},z=j("div",{class:"ibk-write-list-item__title"},[j("p",null,"내용")],-1),U={class:"ibk-write-list-item__input"},I={key:0,class:"ibk-write-list-item"},G={class:"ibk-write-list-item__title"},H={class:"ml-2 text-primary"},K={class:"ibk-write-list-file"},S=j("i",{class:"ibk-icon-24-folder"},null,-1),J={class:"ibk-write-list-file__delete"},R={key:1,class:"ibk-write-list-item"},W={class:"ibk-write-list-item__title"},X={class:"ml-2 text-primary"},Z={class:"ibk-write-list-file"},tt=j("i",{class:"ibk-icon-24-folder"},null,-1),et={class:"ibk-write-list-file__delete"},lt={class:"ibk-write-list-item"},st=j("div",{class:"ibk-write-list-item__title"},[j("p",null,"파일 업로드하기")],-1),it={class:"ibk-write-list-upload"},at=j("div",{class:"ibk-write-list-upload__text"},"* 10MB 미만의 파일 최대 3개까지 첨부 가능합니다.",-1),ot={class:"ibk-write-button"},nt={class:"ibk-write-button__check"},rt=j("label",{for:"secrtPtngYn",class:"ml-2"}," 비밀글로 등록하기 ",-1),ut={class:"ibk-write-button__button"},ct=w({__name:"write",setup(w){t();const ct=e(),dt=_(ct.query.dutyEdctCd),mt=_(ct.query.edctDsprNo),pt=_(ct.query.edctQstnNo),vt=_(!1),bt=k(),kt=_("등록"),wt=_("ADD");d({htmlAttrs:{class:"mobile-header-hide"}});const _t=f({edctQstnNo:Number(pt.value),edctDsprNo:Number(mt.value),dutyEdctCd:dt.value,dutyEdctNm:"",edctQstnTtlNm:"",qstnCon:"",useYn:"Y",secrtPtngYn:"N",cretTs:"",cncrId:"",courseBoardAtchOutList:[],courseBoardAtchDelletInList:[],uploadFileList:[]});_("");const ft=_({height:300});l();const yt=t=>{const e=["bytes","KB","MB","GB","TB","PB"];if(0===t)return`0 ${e[0]}`;const l=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,l)).toFixed(3))} ${e[l]}`},gt=async()=>{if(ht()){let t;if(!vt.value){vt.value=!0,await i(!0);try{t="ADD"===wt.value?await bt.saveCourseQuestion(_t):await bt.modifyCourseQuestion(_t),t.success?(alert(`문의가 ${kt.value}되었습니다`),s(`/course/question/manage?dutyEdctCd=${dt.value}&edctDsprNo=${Number(mt.value)}`)):alert(`문의 ${kt.value}중 오류가 발생하였습니다.`)}finally{await i(!1),vt.value=!1}}}},ht=()=>null==_t.edctQstnTtlNm||""===_t.edctQstnTtlNm?(alert("제목은 필수 입력값입니다."),!1):null!=Nt(_t.qstnCon)&&""!==Nt(_t.qstnCon)||(alert("내용은 필수 입력값입니다."),!1),Nt=t=>{const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},jt=(t,e)=>{null==t?_t.uploadFileList.splice(e,1):(_t.courseBoardAtchDelletInList.push(t),_t.courseBoardAtchOutList.splice(e,1))};return y((async()=>{Number(pt.value)>0?(await(async()=>{let t=await a().inqCourseQuestionDtl({edctQstnNo:Number(pt.value)});const e=o(t);n.isSuccess(e)&&Object.assign(_t,e.response)})(),kt.value="수정",wt.value="MOD"):(kt.value="등록",wt.value="ADD")})),(t,e)=>{const l=b,i=g("froala"),a=r,o=u,n=v,d=c,k=p,w=m;return h(),N("div",T,[j("div",Q,[j("div",$,[C(w,null,{content:L((()=>[j("div",V,[j("div",M,[j("div",O,[Y,j("div",E,[C(l,{type:"text",size:"large",placeholder:"제목을 입력해 주세요.",class:"w-full",modelValue:D(_t).edctQstnTtlNm,"onUpdate:modelValue":e[0]||(e[0]=t=>D(_t).edctQstnTtlNm=t)},null,8,["modelValue"])])]),j("div",P,[z,j("div",U,[C(i,{tag:"textarea",value:D(_t).qstnCon,"onUpdate:value":e[1]||(e[1]=t=>D(_t).qstnCon=t),config:ft.value},null,8,["value","config"])])]),D(_t).uploadFileList.length>0?(h(),N("div",I,[j("div",G,[j("p",null,[B("첨부파일 "),j("span",H,A(D(_t).uploadFileList.length),1)])]),j("div",K,[j("ul",null,[(h(!0),N(q,null,x(D(_t).uploadFileList,((t,e)=>(h(),N("li",{key:t.name+t.type+t.size},[C(a,{to:"/",class:"ibk-write-list-file__text"},{default:L((()=>[S,j("p",null,A(t.name),1),j("strong",null,A(yt(t.size)),1)])),_:2},1024),j("div",J,[C(o,{icon:"ibk-icon-24-close",link:"",rounded:"",onClick:t=>jt(null,e)},null,8,["onClick"])])])))),128))])])])):F("",!0),D(_t).courseBoardAtchOutList&&D(_t).courseBoardAtchOutList.length>0?(h(),N("div",R,[j("div",W,[j("p",null,[B("첨부파일 "),j("span",X,A(D(_t).courseBoardAtchOutList.length),1)])]),j("div",Z,[j("ul",null,[(h(!0),N(q,null,x(D(_t).courseBoardAtchOutList,((t,e)=>(h(),N("li",{key:t.orcpFileNm+e},[C(a,{to:"/",class:"ibk-write-list-file__text"},{default:L((()=>[tt,j("p",null,A(t.orcpFileNm),1)])),_:2},1024),j("div",et,[C(o,{icon:"ibk-icon-24-close",link:"",rounded:"",onClick:l=>jt(t,e)},null,8,["onClick"])])])))),128))])])])):F("",!0),j("div",lt,[st,j("div",it,[C(n),C(d,{modelValue:D(_t).uploadFileList,"onUpdate:modelValue":e[2]||(e[2]=t=>D(_t).uploadFileList=t)},null,8,["modelValue"]),at])])]),j("div",ot,[j("div",nt,[C(k,{modelValue:D(_t).secrtPtngYn,"onUpdate:modelValue":e[3]||(e[3]=t=>D(_t).secrtPtngYn=t),binary:"",id:"secrtPtngYn","true-value":"Y","false-value":"N"},null,8,["modelValue"]),rt]),j("div",ut,[C(o,{label:"취소",severity:"secondary",outlined:"",size:"large",onClick:e[4]||(e[4]=e=>("navigateTo"in t?t.navigateTo:D(s))(`/course/question/manage?dutyEdctCd=${dt.value}&edctDsprNo=${mt.value}`))}),C(o,{label:`${kt.value}하기`,severity:"primary",size:"large",onClick:gt},null,8,["label"])])])])])),_:1})])])])}}});export{ct as default};
