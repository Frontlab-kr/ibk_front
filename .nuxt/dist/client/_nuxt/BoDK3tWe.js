import{w as t,p as e,k as s,y as a,$ as l,a as c,x as d,U as i,t as o,s as r,m as n,_ as u}from"./DYWNVjri.js";import{u as b}from"./CHO5UxoL.js";import{d as k}from"./B9LA6prU.js";import{d as y,r as p,D as v,A as h,o as f,c as _,e as C,a as N,G as m,t as D,s as g,i as T,F as A,f as L,b as Q}from"./BL-uwq_y.js";const w={class:"ibk-inner"},O={class:"ibk-board"},$={class:"ibk-board-inner"},j={class:"ibk-board-head"},B={class:"ibk-board-head__button"},q={class:"ibk-board-detail"},E={class:"ibk-board-detail-head"},Y={class:"ibk-board-detail-head__title"},x={class:"ibk-board-detail-head__badge"},I={class:"ibk-board-detail-head__clip"},F={key:0,class:"ibk-icon-24-clip"},H={class:"ibk-board-detail-head-contents"},M={class:"ibk-board-detail-head__date"},S={key:0,class:"ibk-board-detail-head__button"},V={class:"ibk-board-detail-contents"},G=["innerHTML"],P={key:0,class:"ibk-board-detail-file"},R=C("i",{class:"ibk-icon-24-folder"},null,-1),U={key:1,class:"ibk-board-detail-reply"},z={class:"ibk-board-detail-reply__inner"},J={class:"ibk-board-detail-reply__title"},K={class:"ibk-board-detail-reply__date"},W=["innerHTML"],X={key:0,class:"ibk-board-detail-file mt-3"},Z=C("i",{class:"ibk-icon-24-folder"},null,-1),tt=y({__name:"detail",setup(y){b({htmlAttrs:{class:"mobile-header-hide"}});const tt=t(),et=p(tt.query.edctQstnNo),st=p(""),at=p(""),lt=p(!1),ct=e(),dt=v({edctQstnNo:Number(et.value),edctDsprNo:0,dutyEdctNm:"",edctQstnTtlNm:"",edctQstnCon:"",useYn:"Y",cretTs:"",cncrId:"",courseBoardAtchOutList:[]}),it=v({edctQstnNo:Number(et.value),edctQstnRplyNo:0,dutyEdctCd:"",rplyDtlCon:"",useYn:"Y",courseBoardAtchOutList:[],courseBoardAtchDelletInList:[],uploadFileList:[]}),ot=async()=>{"Y"===dt.secrtPtngYn&&dt.cncrId!==ct.userInfo.userId&&(o("본인만 확인 가능합니다."),a("/support"))},rt=async()=>{if(await i.confirm("문의글을 삭제하시겠습니까?")){const t=await c().delCourseQuestion(dt);t&&200===t.status?(alert("문의글이 삭제되었습니다."),await a(`/course/question/manage?dutyEdctCd=${dt.dutyEdctCd}&edctDsprNo=${dt.edctDsprNo}`)):alert("삭제 처리중 오류가 발생하였습니다")}},nt=s(),ut=()=>{nt.back()},bt=async(t,e,s,a,l)=>{const c=`/v1/file/download/course/${t}/${e}/${s}/${a}/${l}`;await k(c,"")};return h((async()=>{Number(et.value)>0&&await(async()=>{let t;try{t=await l(c().inqCourseQuestionDtl({edctQstnNo:Number(et.value)}))}catch(s){nt.back()}const e=d(t);if(i.isSuccess(e)){Object.assign(dt,e.response),await ot();let t=await c().inqCourseQuestionAnswerDtl({edctQstnNo:Number(et.value)});const s=d(t);i.isSuccess(s)&&s.response&&Object.assign(it,s.response),st.value=it.rplyDtlCon&&it.rplyDtlCon.length>0?"답변완료":"답변대기",lt.value=!!(it.rplyDtlCon&&it.rplyDtlCon.length>0),at.value=it.rplyDtlCon&&it.rplyDtlCon.length>0?"background: #234eaa; color: #ffffff":"background: #e4f2ff; color: #1654d1"}})()})),(t,e)=>{const s=r,l=n,c=u;return f(),_("div",w,[C("div",O,[C("div",$,[C("div",j,[C("div",B,[N(s,{icon:"ibk-icon-16-arrowleft",label:"목록",severity:"secondary",outlined:"",onClick:ut})])]),C("div",q,[C("div",E,[C("div",Y,[C("div",x,[N(l,{value:st.value,style:m(at.value)},null,8,["value","style"])]),C("p",null,D(g(dt).edctQstnTtlNm),1),C("div",I,[g(dt).atchCnt>0?(f(),_("i",F)):T("",!0)])]),C("div",H,[C("div",M,D(g(dt).cretTs&&g(dt).cretTs.length>0?g(dt).cretTs.substring(0,10):""),1),lt.value?T("",!0):(f(),_("div",S,[N(s,{label:"삭제",severity:"secondary",outlined:"",class:"text-red-500",onClick:rt}),N(s,{label:"수정",severity:"secondary",outlined:"",onClick:e[0]||(e[0]=e=>("navigateTo"in t?t.navigateTo:g(a))(`/course/question/write?dutyEdctCd=${g(dt).dutyEdctCd}&edctDsprNo=${g(dt).edctDsprNo}&edctQstnNo=${g(dt).edctQstnNo}`))})]))])]),C("div",V,[C("p",{innerHTML:g(dt).qstnCon},null,8,G)]),g(dt).courseBoardAtchOutList&&g(dt).courseBoardAtchOutList.length>0?(f(),_("div",P,[C("ul",null,[(f(!0),_(A,null,L(g(dt).courseBoardAtchOutList,((t,e)=>(f(),_("li",null,[N(c,{onClick:e=>bt(t.dutyEdctCd,t.edctDsprNo,t.objcDsncVl,t.edctAtchObjcNo,t.edctAtchSqn),class:"ibk-board-detail-file__text"},{default:Q((()=>[R,C("p",null,D(t.orcpFileNm),1)])),_:2},1032,["onClick"])])))),256))])])):T("",!0),g(it).cretTs&&g(it).cretTs.length>0?(f(),_("div",U,[C("div",z,[C("div",J,"안녕하세요 "+D(g(dt).cncrName)+"님. 문의 주신 내용 답변드립니다.",1),C("div",K,D(g(it).cretTs&&g(it).cretTs.length>0?g(it).cretTs.substring(0,10):"")+" 관리자 답변완료",1),C("div",{class:"ibk-board-detail-reply__contents",innerHTML:g(it).rplyDtlCon},null,8,W),g(it).courseBoardAtchOutList&&g(it).courseBoardAtchOutList.length>0?(f(),_("div",X,[C("ul",null,[(f(!0),_(A,null,L(g(it).courseBoardAtchOutList,((t,e)=>(f(),_("li",null,[N(c,{onClick:e=>bt(t.dutyEdctCd,t.edctDsprNo,t.objcDsncVl,t.edctAtchObjcNo,t.edctAtchSqn),class:"ibk-board-detail-file__text"},{default:Q((()=>[Z,C("p",null,D(t.orcpFileNm),1)])),_:2},1032,["onClick"])])))),256))])])):T("",!0)])])):T("",!0)])])])])}}});export{tt as default};
