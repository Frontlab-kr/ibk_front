import{w as a,p as s,y as e,$ as t,a as l,x as i,U as n,t as r,s as o,m as c,_ as d}from"./Dw9mMgGh.js";import{u as b}from"./6ZGac68T.js";import{d as u}from"./BDeUj8k2.js";import{d as v,r as p,D as k,A as y,o as h,c as f,e as _,a as m,s as g,G as T,t as C,i as w,F as q,f as N,b as I}from"./BL-uwq_y.js";const Q={class:"ibk-inner"},L={class:"ibk-board"},A={class:"ibk-board-inner"},F={class:"ibk-board-head"},O={class:"ibk-board-head__button"},Y={class:"ibk-board-detail"},j={class:"ibk-board-detail-head"},x={class:"ibk-board-detail-head__title"},H={class:"ibk-board-detail-head__badge"},M={class:"ibk-board-detail-head__clip"},$={key:0,class:"ibk-icon-24-clip"},D={class:"ibk-board-detail-head-contents"},S={class:"ibk-board-detail-head__info"},P={key:0,class:"ibk-board-detail-head__button"},G={class:"ibk-board-detail-contents"},U=["innerHTML"],z={key:0,class:"ibk-board-detail-file"},B=_("i",{class:"ibk-icon-24-folder"},null,-1),E={style:{cursor:"pointer"}},J={key:1,class:"ibk-board-detail-reply"},K={class:"ibk-board-detail-reply__inner"},R={class:"ibk-board-detail-reply__title"},V={class:"ibk-board-detail-reply__date"},W=["innerHTML"],X=v({__name:"detail",setup(v){b({htmlAttrs:{class:"mobile-header-hide"}});const X=a(),Z=p(X.query.blbrQstnId),aa=p(!1),sa=p(""),ea=p(""),ta=s(),la=k({blbrQstnId:Number(Z.value),blbrQstnTtlNm:"",qstnCon:"",useYn:"Y",secrtPtngYn:"N",cretTs:"",cncrId:"",questionAttachFileOutList:[]}),ia=k({blbrQstnId:Number(Z.value),rplyCon:"",useYn:"Y",answerAttachFileOutList:[]}),na=async()=>{"Y"===la.secrtPtngYn&&la.cncrId!==ta.userInfo.userId&&(r("본인만 확인 가능합니다."),e("/support"))},ra=async()=>{if(await n.confirm("문의글을 삭제하시겠습니까?")){const a=await l().delQuestion(la);a&&200===a.status?(alert("문의글이 삭제되었습니다."),await e("/support")):alert("삭제 처리중 오류가 발생하였습니다")}};return y((async()=>{Number(Z.value)>0&&await(async()=>{let a;try{a=await t(l().inqQuestionDtl({blbrQstnId:Number(Z.value)}))}catch(r){e("/support")}const s=i(a);if(n.isSuccess(s)){Object.assign(la,s.response),await na();let a=await l().inqQuestionAnswerDtl({blbrQstnId:Number(Z.value)});const e=i(a);n.isSuccess(e)&&e.response&&Object.assign(ia,e.response),sa.value=ia.rplyCon&&ia.rplyCon.length>0?"답변완료":"답변대기",aa.value=!!(ia.rplyCon&&ia.rplyCon.length>0),ea.value=ia.rplyCon&&ia.rplyCon.length>0?"background: #234eaa; color: #ffffff":"background: #e4f2ff; color: #1654d1"}})()})),(a,s)=>{const t=o,l=c,i=d;return h(),f("div",Q,[_("div",L,[_("div",A,[_("div",F,[_("div",O,[m(t,{icon:"ibk-icon-16-arrowleft",label:"목록",severity:"secondary",outlined:"",onClick:s[0]||(s[0]=s=>("navigateTo"in a?a.navigateTo:g(e))("/support"))})])]),_("div",Y,[_("div",j,[_("div",x,[_("div",H,[m(l,{value:sa.value,style:T(ea.value)},null,8,["value","style"])]),_("p",null,C(g(la).blbrQstnTtlNm),1),_("div",M,[g(la).atchCount>0?(h(),f("i",$)):w("",!0)])]),_("div",D,[_("div",S,[_("ul",null,[_("li",null,C(g(la).cncrName),1),_("li",null,C(g(la).cretTs&&g(la).cretTs.length>0?g(la).cretTs.substring(0,10):""),1)])]),aa.value?w("",!0):(h(),f("div",P,[m(t,{label:"삭제",severity:"secondary",outlined:"",class:"text-red-500",onClick:ra}),m(t,{label:"수정",severity:"secondary",outlined:"",onClick:s[1]||(s[1]=s=>("navigateTo"in a?a.navigateTo:g(e))(`/support/question/write?blbrQstnId=${Z.value}`))})]))])]),_("div",G,[_("p",{innerHTML:g(la).qstnCon},null,8,U)]),g(la).questionAttachFileOutList&&g(la).questionAttachFileOutList.length>0?(h(),f("div",z,[_("ul",null,[(h(!0),f(q,null,N(g(la).questionAttachFileOutList,((a,s)=>(h(),f("li",null,[m(i,{onClick:s=>(async(a,s,e)=>{const t=`/v1/file/download/question/${a}/${s}`;await u(t,e)})(a.atchId,a.atchSqn,a.orcpFileNm),class:"ibk-board-detail-file__text"},{default:I((()=>[B,_("p",E,C(a.orcpFileNm),1)])),_:2},1032,["onClick"])])))),256))])])):w("",!0),g(ia).cretTs&&g(ia).cretTs.length>0?(h(),f("div",J,[_("div",K,[_("div",R,"안녕하세요 "+C(g(la).cncrName)+"님. 문의 주신 내용 답변드립니다.",1),_("div",V,C(g(ia).cretTs&&g(ia).cretTs.length>0?g(ia).cretTs.substring(0,10):"")+" 관리자 답변완료 ",1),_("div",{class:"ibk-board-detail-reply__contents",innerHTML:g(ia).rplyCon},null,8,W)])])):w("",!0)])])])])}}});export{X as default};
