import{p as t,U as e,s as n,l,w as o,k as r,m as i}from"./Dw9mMgGh.js";import{u as s}from"./6ZGac68T.js";import{u as m}from"./DCMwUudl.js";import{s as b}from"./BHGSApiG.js";import{d as a,C as d,D as c,r as u,o as C,c as p,e as y,t as I,s as g,a as k,B as v,G as B,F as f,A as h,h as N,g as _,i as P,f as R,v as w,z as x}from"./BL-uwq_y.js";import{d as A}from"./BDeUj8k2.js";const L={class:"ibk-comment-form__name"},E={class:"ibk-comment-form__textarea"},F={class:"ibk-comment-form__button"},T=a({__name:"CommunityBoardCommentsForm",props:{blbrNo:null,blbrPtngId:null,blbrRpcmId:null,isBorder:null},emits:["refresh"],setup(l,{emit:o}){const r=m(),i=t(),s=l,a=d((()=>s.isBorder?{border:"solid 1px #eeeeee"}:{})),h=o,N=c({blbrNo:s.blbrNo,blbrPtngId:s.blbrPtngId,blbrRpcmId:void 0,hgrnBlbrRpcmId:0,blbrRpcmCon:"",useYn:"Y"}),_=u(""),P=async()=>{N.blbrNo=s.blbrNo,N.blbrPtngId=s.blbrPtngId,N.hgrnBlbrRpcmId=s.blbrRpcmId||0,N.blbrRpcmCon=_.value;(await r.saveBoardContentsComment(N)).success&&(_.value="",e.alert("정상 처리 되었습니다"),h("refresh"))};return(t,e)=>{const l=b,o=n;return C(),p(f,null,[y("div",L,I(g(i).userInfo.userNm||""),1),y("div",E,[k(l,{modelValue:g(_),"onUpdate:modelValue":e[0]||(e[0]=t=>v(_)?_.value=t:null),style:B(g(a)),class:"p-2"},null,8,["modelValue","style"])]),y("div",F,[k(o,{label:"취소",severity:"secondary",text:""}),k(o,{label:"등록",severity:"primary",class:"tonal",onClick:P})])],64)}}}),$={class:"ibk-comment-list-item__info"},j={class:"ibk-comment-list-item__text"},V={key:1},q={class:"ibk-comment-list-item__button"},D={class:"ibk-comment-list-item__menu"},S=y("li",null,null,-1),Y={key:0},M=y("i",{class:"ibk-icon-16-reply-primary"},null,-1),O=y("i",{class:"ibk-icon-16-reply-arrow"},null,-1),U={key:0,class:"ibk-comment"},H=a({__name:"CommunityBoardCommentsItemContents",props:{item:null,blbrNo:null,blbrPtngId:null},emits:["refresh"],setup(t,{emit:l}){const o=m(),r=t,i=l,s=u(""),a=async()=>{if(r.item.isActive){const t=o.openedCommentId.findIndex((t=>t===r.item.blbrRpcmId));t>0&&o.openedCommentId.splice(t,1)}else o.openedCommentId.push(r.item.blbrRpcmId),await o.getBoardContentsCommentList(Number(r.blbrPtngId),Number(r.item.blbrRpcmId));r.item.isActive=!r.item.isActive},d=()=>{s.value=r.item.blbrRpcmCon??"",r.item.isEdit=!0},c=()=>{s.value="",r.item.isEdit=!1},B=async()=>{if(!(await e.confirm("정말 삭제하시겠습니까?")))return;const t={blbrNo:r.item.blbrNo,blbrPtngId:r.blbrPtngId,hgrnBlbrRpcmId:r.item.hgrnBlbrRpcmId||0,blbrRpcmId:r.item.blbrRpcmId};(await o.delBoardContentsComment(t)).success&&(e.alert("정상 처리 되었습니다"),x())},w=async()=>{const t={blbrNo:r.item.blbrNo,blbrPtngId:r.blbrPtngId,hgrnBlbrRpcmId:r.item.hgrnBlbrRpcmId||0,blbrRpcmId:r.item.blbrRpcmId,blbrRpcmCon:s.value,useYn:"Y"};(await o.modBoardContentsComment(t)).success&&(e.alert("정상 처리 되었습니다"),x())},x=()=>{i("refresh")};return h((()=>{})),(l,o)=>{const i=b,m=n,u=T,h=H;return C(),p(f,null,[y("div",$,[y("strong",null,I(r.item.cncrName)+" ("+I(r.item.cncrId)+")",1),N(" "+I(g(e).getTimeDifference(r.item.hrdSysLastMdfcTs??"")),1)]),y("div",j,[r.item.isEdit?(C(),_(i,{key:0,modelValue:g(s),"onUpdate:modelValue":o[0]||(o[0]=t=>v(s)?s.value=t:null),class:"w-full p-1"},null,8,["modelValue"])):(C(),p("p",V,I(r.item.blbrRpcmCon),1))]),y("div",q,[k(m,{label:"삭제",text:"",class:"text-red-500",onClick:B}),r.item.isEdit?P("",!0):(C(),_(m,{key:0,label:"수정",text:"",class:"text-gray-900",onClick:d})),r.item.isEdit?(C(),_(m,{key:1,label:"취소",text:"",class:"text-gray-900",onClick:c})):P("",!0),r.item.isEdit?(C(),_(m,{key:2,label:"저장",text:"",class:"text-blue-900",onClick:w})):P("",!0)]),y("div",D,[y("ul",null,[S,r.item.hgrnBlbrRpcmId&&0!==r.item.hgrnBlbrRpcmId?P("",!0):(C(),p("li",Y,[y("button",{class:"text-primary",onClick:a},[M,N(I(`답글 ${r.item?.commentCount?.toLocaleString()||0}개`),1),O])]))])]),r.item.isActive?(C(),p("div",U,[k(u,{blbrNo:r.item.blbrNo??0,blbrPtngId:r.blbrPtngId,blbrRpcmId:r.item.blbrRpcmId,onRefresh:x,"is-border":!0},null,8,["blbrNo","blbrPtngId","blbrRpcmId"]),(C(!0),p(f,null,R(t.item.children,((t,e)=>(C(),_(h,{key:`${t.blbrRpcmId}_${e}`,item:t,blbrPtngId:r.blbrPtngId,blbrNo:r.blbrNo,onRefresh:x},null,8,["item","blbrPtngId","blbrNo"])))),128))])):P("",!0)],64)}}}),z=a({__name:"CommunityBoardCommentsItem",props:{item:null,blbrPtngId:null},emits:["refresh"],setup(t,{emit:e}){m();const n=t,l=e,o=()=>{l("refresh")};return h((()=>{})),(e,l)=>(C(),p("div",{class:w({"ibk-comment-list-item active":t.item.isActive,"ibk-comment-list-item":!t.item.isActive})},[k(H,{item:n.item,blbrPtngId:n.blbrPtngId,blbrNo:n.item.blbrNo,onRefresh:o},null,8,["item","blbrPtngId","blbrNo"])],2))}}),G={class:"ibk-comment"},J={class:"ibk-comment__title"},K={class:"ibk-comment-form"},Q={class:"ibk-comment-list"},W=l(a({__name:"CommunityBoardComments",props:{blbrNo:null,blbrPtngId:null,commentCount:null},emits:["refresh"],setup(t,{emit:e}){const n=m(),l=t,o=e;function r(){o("refresh")}return u(!1),x((async()=>{await n.getBoardContentsCommentList(l.blbrPtngId)})),(t,e)=>(C(),p("div",G,[y("div",J,[N("댓글 "),y("strong",null,I(l.commentCount),1)]),y("div",K,[k(T,{blbrNo:l.blbrNo,blbrPtngId:l.blbrPtngId,isBorder:!1,onRefresh:r},null,8,["blbrNo","blbrPtngId"])]),y("div",Q,[(C(!0),p(f,null,R(g(n).communityBoardContentsCommentList,((t,e)=>(C(),_(z,{key:`${t.blbrPtngId}_${e}`,item:t,blbrNo:l.blbrNo,blbrPtngId:l.blbrPtngId,onRefresh:r},null,8,["item","blbrNo","blbrPtngId"])))),128))])]))}}),[["__scopeId","data-v-7b1687eb"]]),X={class:"ibk-inner"},Z={class:"ibk-board"},tt={class:"ibk-board-head"},et={class:"ibk-board-head__button"},nt={class:"ibk-board-inner"},lt={class:"ibk-board-detail"},ot={class:"ibk-board-detail-head"},rt={class:"ibk-board-detail-head__title"},it={key:0,class:"ibk-board-detail-head__badge"},st={class:"ibk-board-detail-head-contents"},mt={class:"ibk-board-detail-head__info"},bt=y("i",{class:"ibk-icon-16-view"},null,-1),at={key:0,class:"ibk-board-detail-head__button"},dt=["innerHTML"],ct={class:"ibk-board-detail-file"},ut=["item"],Ct={class:"ibk-board-detail-file__text"},pt=y("i",{class:"ibk-icon-24-download"},null,-1),yt={class:"cursor-pointer"},It=["onClick"],gt={key:1},kt=[y("p",null,"첨부파일이 없습니다.",-1)],vt=a({__name:"CommunityBoardContentsDetail",setup(l){const s=m(),b=t(),a=o(),c=r(),u=d((()=>b.userInfo&&b.userInfo.userId===s.communityBoardContents?.cncrId)),v=async()=>{if(!(await e.confirm("정말 삭제하시겠습니까?")))return;(await s.delBoardContents({blbrNo:s.communityBoardContents?.blbrNo,blbrPtngId:s.communityBoardContents?.blbrPtngId})).success&&(e.alert("정상 처리 되었습니다"),c.replace("/community"))},B=()=>{c.push({path:"/community/edit",query:{blbrPtngId:a.params.blbrPtngId}})},h=()=>{c.push("/community")},w=async()=>{const t=a.params.blbrPtngId;await s.getBoardContentsDetail({blbrPtngId:Number(t)}),s.communityBoardContents.commentCnt>0?await s.getBoardContentsCommentList(Number(t)):s.communityBoardContentsCommentList=[]};return(t,e)=>{const l=n,o=i;return C(),p("div",X,[y("div",Z,[y("div",tt,[y("div",et,[k(l,{icon:"ibk-icon-16-arrowleft",label:"목록",severity:"secondary",outlined:"",onClick:h})])]),y("div",nt,[y("div",lt,[y("div",ot,[y("div",rt,[g(s).communityBoardContents?.ctgyNm?(C(),p("div",it,[k(o,{value:g(s).communityBoardContents?.ctgyNm,style:{background:"#f2f2f2",color:"#5a5e6c"}},null,8,["value"])])):P("",!0),y("p",null,I(g(s).communityBoardContents?.bltApowTtlNm),1)]),y("div",st,[y("div",mt,[y("ul",null,[y("li",null,I(g(s).communityBoardContents?.cncrName??g(s).communityBoardContents?.cncrId),1),y("li",null,I(g(s).communityBoardContents?.cretTs),1),y("li",null,[bt,N(" "+I(g(s).communityBoardContents?.inqCnt),1)])])]),1!=g(s).communityBoardContents?.blbrNo||2!=g(s).communityBoardContents?.blbrNo?(C(),p("div",at,[g(u)?(C(),_(l,{key:0,label:"삭제",severity:"secondary",outlined:"",class:"text-red-500",onClick:v})):P("",!0),g(u)?(C(),_(l,{key:1,label:"수정",severity:"secondary",onClick:B})):P("",!0)])):P("",!0)])]),y("div",{class:"ibk-board-detail-contents",innerHTML:g(s).communityBoardContents?.bltApowCon},null,8,dt),y("div",ct,[y("h3",null,[N("첨부파일 "),y("strong",null,I(g(s).communityBoardContents?.commonAttachFileOutList?.length??0),1)]),y("ul",null,[g(s).communityBoardContents?.commonAttachFileOutList?.length?(C(!0),p(f,{key:0},R(g(s).communityBoardContents?.commonAttachFileOutList,(t=>(C(),p("li",{item:t,key:t.atchSqn},[y("div",Ct,[pt,y("div",yt,[y("a",{onClick:e=>(async(t,e,n)=>{const l=`/v1/file/download/community/${t}/${e}`;await A(l,n)})(t.atchId,t.atchSqn,t.orcpFileNm)},[y("p",null,I(t.orcpFileNm),1)],8,It)])])],8,ut)))),128)):(C(),p("li",gt,kt))])]),k(W,{blbrNo:g(s).communityBoardContents?.blbrNo??0,blbrPtngId:g(s).communityBoardContents?.blbrPtngId??0,commentCount:g(s).communityBoardContents?.commentCnt??0,onRefresh:w},null,8,["blbrNo","blbrPtngId","commentCount"])])])])])}}}),Bt={class:"ibk-inner"},ft={class:"ibk-board"},ht=a({__name:"index",setup(t){s({htmlAttrs:{class:"mobile-header-hide"}});const n=m(),l=o(),i=r(),b=u(l.params.blbrPtngId);c({blbrNo:void 0,blbrPtngId:void 0,bltApowTtlNm:"",bltApowCon:"",cncrId:"",inqCnt:0,commentCnt:0});const a=c({blbrPtngId:Number(b.value)});return x((async()=>{if(b.value){await n.getBoardContentsDetail(a)?n.communityBoardContents.commentCnt>0?await n.getBoardContentsCommentList(Number(b.value)):n.communityBoardContentsCommentList=[]:(e.alert("해당 게시물이 없습니다"),i.go(-1))}else e.alert("해당 게시물이 없습니다"),i.go(-1)})),(t,e)=>(C(),p("div",Bt,[y("div",ft,[k(vt)])]))}});export{ht as default};
